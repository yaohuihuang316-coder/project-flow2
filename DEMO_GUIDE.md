# ProjectFlow 系统功能演示文档

> 版本: v3.0 | 日期: 2026-02-14

---

## 📋 系统概览

### 技术栈
- **前端**: React 18 + TypeScript + Tailwind CSS + Vite
- **后端**: Supabase (PostgreSQL + Auth + Realtime)
- **图表**: Recharts + ECharts
- **AI**: Gemini API + Kimi API

### 数据库表结构 (25张表)

```
┌─────────────────────────────────────────────────────────────┐
│ 核心用户系统                                                │
├─────────────────────────────────────────────────────────────┤
│ • app_users              - 用户信息                         │
│ • app_user_progress      - 学习进度                         │
│ • app_user_follows       - 用户关注                         │
│ • app_user_likes         - 点赞记录                         │
│ • app_user_announcement_reads - 公告已读                    │
│ • app_user_kb_mastery    - 知识点掌握                       │
│ • app_user_simulation_progress - 模拟进度                   │
├─────────────────────────────────────────────────────────────┤
│ 内容系统                                                    │
├─────────────────────────────────────────────────────────────┤
│ • app_courses            - 课程                             │
│ • app_kb_nodes           - 知识节点                         │
│ • app_kb_edges           - 知识边(关系)                     │
│ • app_simulation_scenarios - 模拟场景                       │
│ • app_topics             - 话题                             │
├─────────────────────────────────────────────────────────────┤
│ 社区系统                                                    │
├─────────────────────────────────────────────────────────────┤
│ • app_community_posts    - 社区帖子                         │
│ • app_comments           - 评论                             │
│ • app_post_topics        - 帖子话题关联                     │
├─────────────────────────────────────────────────────────────┤
│ 会员系统                                                    │
├─────────────────────────────────────────────────────────────┤
│ • membership_subscriptions - 订阅记录                       │
│ • membership_codes       - 兑换码                           │
├─────────────────────────────────────────────────────────────┤
│ 运营系统                                                    │
├─────────────────────────────────────────────────────────────┤
│ • app_announcements      - 公告                             │
│ • app_banners            - Banner                           │
│ • app_cpm_projects       - CPM项目                          │
│ • app_ai_usage           - AI使用记录                       │
│ • app_system_configs     - 系统配置                         │
│ • app_admin_logs         - 管理日志                         │
│ • app_messages           - 消息                             │
│ • app_reports            - 报告                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 🚀 演示流程

### 第一阶段: 基础功能验证

#### 1.1 登录/注册
**测试步骤:**
1. 访问首页 `/`
2. 点击登录按钮
3. 使用测试账号登录:
   - 管理员: `admin@example.com` / `admin123`
   - 普通用户: `test@example.com` / `test123`
4. 验证登录成功后跳转到 Dashboard

**预期结果:**
- [ ] 登录表单验证正常
- [ ] 登录成功后显示用户信息
- [ ] 管理员跳转到 Admin Dashboard
- [ ] 普通用户跳转到 Dashboard

#### 1.2 仪表盘 (Dashboard)
**测试步骤:**
1. 观察 Dashboard 加载
2. 检查以下模块:
   - 连续学习天数 (Streak)
   - 本周学习趋势图
   - 今日学习任务列表
   - 会员等级进度
   - 最近动态
   - 快捷入口 (AI助手、工具实验室)
   - 课程进度追踪
   - 知识图谱 (点击节点跳转课程)
   - 推荐课程
   - 学习笔记

**预期结果:**
- [ ] 所有数据正常加载
- [ ] 知识图谱节点可点击跳转
- [ ] 任务列表显示进度条
- [ ] 图表正常渲染

---

### 第二阶段: 学习系统

#### 2.1 课程体系
**测试步骤:**
1. 进入 Learning Hub (`/learning`)
2. 检查课程分类:
   - Foundation (基础)
   - Advanced (进阶)
   - Implementation (实战)
3. 点击课程进入 Classroom
4. 检查章节列表
5. 标记章节完成

**预期结果:**
- [ ] 课程卡片正常显示
- [ ] 章节可点击展开
- [ ] 进度保存正常
- [ ] 完成后显示100%

#### 2.2 知识图谱
**测试步骤:**
1. 进入 Knowledge Graph (`/knowledge-graph`)
2. 观察节点和连线
3. 点击节点查看详情
4. 检查掌握程度颜色

**预期结果:**
- [ ] 图谱正常渲染
- [ ] 节点可交互
- [ ] 掌握程度正确显示

#### 2.3 AI 助手
**测试步骤:**
1. 打开 AI Assistant
2. 发送测试消息
3. 检查回复内容
4. 验证每日调用次数限制

**预期结果:**
- [ ] AI正常回复
- [ ] 调用次数正确扣减
- [ ] 达到上限后提示升级

---

### 第三阶段: 会员系统

#### 3.1 会员页面
**测试步骤:**
1. 进入 Membership (`/membership`)
2. 检查三栏布局:
   - Free 卡片
   - Pro 卡片
   - Pro+ 卡片
3. 查看详细对比表格
4. 输入兑换码测试

**预期结果:**
- [ ] 当前会员状态正确显示
- [ ] 进度条显示完成课程数
- [ ] 兑换码功能正常
- [ ] 对比表格完整

#### 3.2 兑换码流程
**测试步骤:**
1. 进入 Admin > 会员管理 > 兑换码
2. 生成新的兑换码
3. 复制兑换码
4. 回到会员页面输入兑换码
5. 验证会员升级

**预期结果:**
- [ ] 兑换码生成成功
- [ ] 可复制兑换码
- [ ] 兑换后会员等级提升
- [ ] 订阅记录生成

---

### 第四阶段: 社区系统

#### 4.1 帖子功能
**测试步骤:**
1. 进入 Community (`/community`)
2. 发布新帖子
3. 给帖子点赞
4. 添加评论
5. 使用搜索功能

**预期结果:**
- [ ] 帖子正常发布
- [ ] 点赞状态保存
- [ ] 评论实时显示
- [ ] 搜索返回正确结果

#### 4.2 关注功能
**测试步骤:**
1. 在帖子卡片点击"关注"按钮
2. 切换"我的关注"标签
3. 查看关注统计

**预期结果:**
- [ ] 关注按钮状态变化
- [ ] 关注列表筛选正常
- [ ] 统计数据更新

---

### 第五阶段: 工具实验室 (Pro)

#### 5.1 权限验证
**测试步骤:**
1. 使用 Free 用户访问 Tools Lab
2. 验证被拦截并提示升级
3. 升级为 Pro 后再次访问

**预期结果:**
- [ ] Free用户被拦截
- [ ] 提示信息清晰
- [ ] Pro用户正常访问

#### 5.2 CPM工具
**测试步骤:**
1. 进入 CPM工具
2. 添加任务节点
3. 设置依赖关系
4. 计算关键路径
5. 保存项目

**预期结果:**
- [ ] 节点可拖拽添加
- [ ] 依赖连线正常
- [ ] 关键路径正确计算
- [ ] 项目可保存/加载

---

### 第六阶段: 实战模拟 (Pro+)

#### 6.1 场景列表
**测试步骤:**
1. 进入 Simulation (`/simulation`)
2. 查看场景卡片
3. 点击进入场景详情
4. 查看学习目标

**预期结果:**
- [ ] 场景列表正常显示
- [ ] 详情页信息完整
- [ ] 进度可恢复

#### 6.2 模拟运行
**测试步骤:**
1. 开始模拟
2. 做出决策选择
3. 观察反馈和得分
4. 完成所有阶段
5. 查看结果报告
6. 导出PDF (Pro+测试)

**预期结果:**
- [ ] 决策流程正常
- [ ] 反馈及时显示
- [ ] 得分计算正确
- [ ] PDF导出正常 (Pro+)

---

### 第七阶段: 管理后台

#### 7.1 仪表盘
**测试步骤:**
1. 登录管理员账号
2. 查看 Admin Dashboard
3. 检查统计数据

**预期结果:**
- [ ] 统计数据正确
- [ ] 图表正常显示

#### 7.2 内容管理
**测试步骤:**
1. 进入课程体系管理
2. 创建/编辑课程
3. 配置章节
4. 保存发布

**预期结果:**
- [ ] CRUD操作正常
- [ ] 富文本编辑器可用
- [ ] 章节排序正常

#### 7.3 用户管理
**测试步骤:**
1. 查看用户列表
2. 编辑用户等级
3. 查看学习进度

**预期结果:**
- [ ] 用户列表分页正常
- [ ] 等级修改生效
- [ ] 进度详情准确

#### 7.4 公告管理
**测试步骤:**
1. 创建新公告
2. 设置目标受众
3. 发布/下线公告
4. 在前台查看公告

**预期结果:**
- [ ] 公告创建成功
- [ ] 目标受众筛选正确
- [ ] 前台显示正确
- [ ] 未读提示正常

#### 7.5 模拟场景管理
**测试步骤:**
1. 进入模拟场景管理
2. 创建新场景
3. 配置阶段和决策
4. 设置得分规则
5. 发布场景

**预期结果:**
- [ ] 场景编辑器可用
- [ ] 阶段可增删改
- [ ] 决策选项配置正常
- [ ] 发布后用户可见

---

### 第八阶段: 消息通知

#### 8.1 公告系统
**测试步骤:**
1. 管理员发布全站公告
2. 普通用户登录查看
3. 点击标记已读
4. 检查未读数

**预期结果:**
- [ ] 公告弹窗/红点提示
- [ ] 可标记已读
- [ ] 未读数正确显示

---

## 📝 测试账号

### 管理员账号
```
邮箱: admin@example.com
密码: admin123
角色: SuperAdmin
```

### 测试用户 (不同等级)
```
Free用户:
  邮箱: free@example.com
  密码: test123
  等级: free

Pro用户:
  邮箱: pro@example.com
  密码: test123
  等级: pro

Pro+用户:
  邮箱: proplus@example.com
  密码: test123
  等级: pro_plus
```

---

## 🔧 常见问题排查

### 问题1: 数据加载失败
**排查步骤:**
1. 检查 Supabase 连接
2. 验证表是否存在
3. 检查 RLS 策略
4. 查看浏览器控制台报错

### 问题2: 权限错误
**排查步骤:**
1. 确认用户角色
2. 检查会员等级
3. 验证函数权限

### 问题3: AI 无响应
**排查步骤:**
1. 检查 API Key 配置
2. 查看调用次数限制
3. 检查网络连接

---

## ✅ 验收检查清单

### 前端功能
- [ ] 所有页面正常加载
- [ ] 路由跳转正常
- [ ] 响应式布局正常
- [ ] 图表渲染正常
- [ ] 动画效果正常

### 后端功能
- [ ] 所有表数据可读
- [ ] CRUD操作正常
- [ ] 权限控制正常
- [ ] 实时订阅正常 (如有)

### 业务功能
- [ ] 学习流程完整
- [ ] 会员升级正常
- [ ] 社区互动正常
- [ ] 工具使用正常
- [ ] 模拟系统正常

### 管理功能
- [ ] 所有管理页面可用
- [ ] 数据编辑保存正常
- [ ] 统计报表准确
- [ ] 公告发布正常

---

## 📞 技术支持

如有问题，请检查:
1. 浏览器控制台错误
2. Supabase Dashboard 日志
3. 数据库表结构完整性

---

**文档结束 | ProjectFlow v3.0**
